<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Webcam Stream</title>
    <link rel="stylesheet" href="webcam.css">
</head>
<body bgcolor="black">
    <div id="container">
        <video autoplay="true" id="videoElement"></video>
        <div id = "rangebox">
            <div class="range blue">
                <div class="sliderValue"><span></span></div>
                <div class="field">
                    <div class="value left">0</div>
                    <input type="range" min="0" max="255" value="255/2" steps="1">
                    <div class="value right">255</div>
                </div>
            </div>
            <div class="range green">
                <div class="sliderValue"><span></span></div>
                <div class="field">
                    <div class="value left">0</div>
                    <input type="range" min="0" max="255" value="255/2" steps="1">
                    <div class="value right">255</div>
                </div>
            </div>
            <div class="range red">
                <div class="sliderValue"><span></span></div>
                <div class="field">
                    <div class="value left">0</div>
                    <input type="range" min="0" max="255" value="255/2" steps="1">
                    <div class="value right">255</div>
                </div>
            </div>
        </div>
        <label id="switch">
          <input type="checkbox">
          <span class="slider round"></span>
        </label>
    </div>

    <script type="text/javascript">
        /* 트랙 바 */
        const slideValue = document.querySelector("span");
        const inputSlider = document.querySelector("input");
        
        inputSlider.oninput = (()=>{
            let value = inputSlider.value;
            slideValue.textContent = value;
            slideValue.style.left = (value/255*100*0.75) + "%";
            slideValue.classList.add("show");
        });
        
        /* 비디오 버튼 */
        // 꺼지는 부분 만들어야 함
        const video = document.querySelector("#videoElement");
        const onoff = document.getElementById('switch');
        
        onoff.onclick = function(){
            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUsermedia || navigator.mozGetUserMedia || navigato.msGetUserMedia || navigator.oGetUserMedia;

            if(navigator.getUserMedia){
                  navigator.getUserMedia({video:true}, handleVideo, videoError)      
            }

            function handleVideo(stream){
                video.srcObject = stream;
                video.play();
            }

            function videoError(e){}
            
            onoff.onclick = null;
        }
    </script>
</body>
</html>